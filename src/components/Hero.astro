---
// Wedding date: June 13, 2026 at 5:30 PM PT (ceremony start)
const weddingDate = new Date("2026-06-13T17:30:00-07:00").getTime();
---

<section
  id="hero"
  class="relative min-h-screen flex items-center justify-center overflow-hidden"
>
  <!-- Background Image - Responsive with Parallax -->
  <picture
    id="hero-bg"
    class="absolute inset-0 w-full h-full will-change-transform"
  >
    <source media="(min-width: 768px)" srcset="/images/hero/hero-desktop.jpg" />
    <img
      src="/images/hero/hero-mobile.jpg"
      alt="Jackson and Mackenzie"
      class="w-full h-full object-cover scale-110"
    />
  </picture>

  <!-- Light Overlay -->
  <div class="absolute inset-0 bg-[var(--color-cream)]/80"></div>

  <!-- Content with Fade Effect -->
  <div
    id="hero-content"
    class="container text-center px-4 relative z-10 will-change-transform"
  >
    <!-- Names -->
    <h1
      class="text-5xl md:text-7xl lg:text-8xl font-heading text-[var(--color-charcoal)] mb-4"
    >
      Jackson <span class="text-[var(--color-sage-dark)]">&</span> Mackenzie
    </h1>

    <!-- Tagline -->
    <p
      class="text-lg md:text-xl text-[var(--color-gray)] mb-2 tracking-widest uppercase"
    >
      We're getting married!
    </p>

    <!-- Date -->
    <p
      class="text-2xl md:text-3xl font-heading text-[var(--color-charcoal)] mb-12"
    >
      June 13, 2026
    </p>

    <!-- Countdown Timer -->
    <div id="countdown" class="flex justify-center gap-4 md:gap-8 mb-12">
      <div class="countdown-item">
        <span
          id="days"
          class="text-4xl md:text-6xl font-heading text-[var(--color-sage-dark)]"
          >---</span
        >
        <span
          class="text-sm md:text-base text-[var(--color-gray)] uppercase tracking-wider"
          >Days</span
        >
      </div>
      <div class="countdown-item">
        <span
          id="hours"
          class="text-4xl md:text-6xl font-heading text-[var(--color-sage-dark)]"
          >--</span
        >
        <span
          class="text-sm md:text-base text-[var(--color-gray)] uppercase tracking-wider"
          >Hours</span
        >
      </div>
      <div class="countdown-item">
        <span
          id="minutes"
          class="text-4xl md:text-6xl font-heading text-[var(--color-sage-dark)]"
          >--</span
        >
        <span
          class="text-sm md:text-base text-[var(--color-gray)] uppercase tracking-wider"
          >Minutes</span
        >
      </div>
      <div class="countdown-item">
        <span
          id="seconds"
          class="text-4xl md:text-6xl font-heading text-[var(--color-sage-dark)]"
          >--</span
        >
        <span
          class="text-sm md:text-base text-[var(--color-gray)] uppercase tracking-wider"
          >Seconds</span
        >
      </div>
    </div>

    <!-- Scroll Indicator -->
    <a href="#our-story" class="inline-block animate-bounce">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-8 w-8 text-[var(--color-sage-dark)]"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </a>
  </div>
</section>

<style>
  .countdown-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 60px;
  }

  @media (min-width: 768px) {
    .countdown-item {
      min-width: 100px;
    }
  }
</style>

<script define:vars={{ weddingDate }}>
  function updateCountdown() {
    const now = new Date().getTime();
    const distance = weddingDate - now;

    if (distance < 0) {
      document.getElementById("countdown").innerHTML =
        '<p class="text-3xl md:text-5xl font-heading text-[var(--color-sage-dark)]">Today\'s the day!</p>';
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor(
      (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
    );
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById("days").textContent = days.toString();
    document.getElementById("hours").textContent = hours
      .toString()
      .padStart(2, "0");
    document.getElementById("minutes").textContent = minutes
      .toString()
      .padStart(2, "0");
    document.getElementById("seconds").textContent = seconds
      .toString()
      .padStart(2, "0");
  }

  // Initial update
  updateCountdown();

  // Update every second
  setInterval(updateCountdown, 1000);

  // Parallax + Fade scroll effect
  const heroBg = document.getElementById("hero-bg");
  const heroContent = document.getElementById("hero-content");
  const heroSection = document.getElementById("hero");

  function handleScroll() {
    const scrollY = window.scrollY;
    const heroHeight = heroSection?.offsetHeight || window.innerHeight;

    // Only apply effects while in hero section
    if (scrollY <= heroHeight) {
      const progress = scrollY / heroHeight;

      // Parallax: background moves slower (0.5x speed)
      if (heroBg) {
        heroBg.style.transform = `translateY(${scrollY * 0.3}px)`;
      }

      // Fade + slight rise: content fades out and moves up
      if (heroContent) {
        heroContent.style.opacity = `${1 - progress * 1.5}`;
        heroContent.style.transform = `translateY(${scrollY * -0.2}px)`;
      }
    }
  }

  let ticking = false;
  window.addEventListener("scroll", () => {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        handleScroll();
        ticking = false;
      });
      ticking = true;
    }
  });

  // Initial state
  handleScroll();
</script>
